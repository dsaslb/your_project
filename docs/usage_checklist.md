# 멀티테넌시 시스템 사용 시나리오 체크리스트

## 1. 기본 멀티테넌시 구조 테스트

### 1.1 업종 관리
- [ ] 업종 목록 조회 (`GET /api/industries`)
- [ ] 새 업종 생성 (`POST /api/industries`)
- [ ] 업종 정보 수정 (`PUT /api/industries/<id>`)
- [ ] 업종 삭제 (`DELETE /api/industries/<id>`)

### 1.2 브랜드 관리
- [ ] 브랜드 목록 조회 (`GET /api/brands`)
- [ ] 새 브랜드 생성 (`POST /api/brands`)
- [ ] 브랜드 정보 수정 (`PUT /api/brands/<id>`)
- [ ] 브랜드 삭제 (`DELETE /api/brands/<id>`)
- [ ] 업종별 브랜드 필터링 확인

### 1.3 매장 관리
- [ ] 매장 목록 조회 (`GET /api/branches`)
- [ ] 새 매장 생성 (`POST /api/branches`)
- [ ] 매장 정보 수정 (`PUT /api/branches/<id>`)
- [ ] 매장 삭제 (`DELETE /api/branches/<id>`)
- [ ] 브랜드별 매장 필터링 확인

### 1.4 직원(사용자) 관리
- [ ] 직원 목록 조회 (`GET /api/users`)
- [ ] 새 직원 생성 (`POST /api/users`)
- [ ] 직원 정보 수정 (`PUT /api/users/<id>`)
- [ ] 직원 삭제 (`DELETE /api/users/<id>`)
- [ ] 매장별 직원 필터링 확인

## 2. 권한 체크 테스트

### 2.1 계층별 권한
- [ ] 업종 관리자: 모든 업종/브랜드/매장/직원 관리 가능
- [ ] 브랜드 관리자: 소속 브랜드의 매장/직원만 관리 가능
- [ ] 매장 관리자: 소속 매장의 직원만 관리 가능
- [ ] 직원: 본인 정보만 수정 가능

### 2.2 권한 오류 시나리오
- [ ] 브랜드 관리자가 다른 브랜드 매장 접근 시도 → 403 오류
- [ ] 매장 관리자가 다른 매장 직원 접근 시도 → 403 오류
- [ ] 직원이 다른 직원 정보 수정 시도 → 403 오류

## 3. 플러그인 관리 테스트

### 3.1 플러그인 ON/OFF
- [ ] 업종 관리자가 플러그인 활성화/비활성화
- [ ] 브랜드별 플러그인 ON/OFF 설정
- [ ] 매장별 플러그인 ON/OFF 설정

### 3.2 플러그인 권한 분배
- [ ] 브랜드별 플러그인 접근 권한 설정
- [ ] 매장별 플러그인 접근 권한 설정
- [ ] 직원별 플러그인 접근 권한 설정

### 3.3 플러그인 기능 테스트
- [ ] 출근 관리 플러그인: 출근/퇴근 기록
- [ ] 재고 관리 플러그인: 재고 조회/수정
- [ ] 구매 관리 플러그인: 발주/공급업체 관리
- [ ] 스케줄 관리 플러그인: 직원 스케줄 관리
- [ ] AI 분석 플러그인: 데이터 분석/리포트

## 4. 주요 사용 시나리오

### 4.1 시나리오 1: 브랜드 관리자가 플러그인 ON
1. [ ] 브랜드 관리자 로그인
2. [ ] 플러그인 마켓에서 "출근 관리" 플러그인 선택
3. [ ] 플러그인 활성화 (ON)
4. [ ] 브랜드 내 모든 매장에 플러그인 적용 확인
5. [ ] 매장 관리자들이 플러그인 사용 가능한지 확인

### 4.2 시나리오 2: 매장 관리자가 직원에게 권한 부여
1. [ ] 매장 관리자 로그인
2. [ ] 직원 관리 페이지에서 특정 직원 선택
3. [ ] 해당 직원에게 "출근 관리" 플러그인 권한 부여
4. [ ] 직원이 출근 관리 플러그인 사용 가능한지 확인
5. [ ] 권한이 없는 직원은 접근 불가능한지 확인

### 4.3 시나리오 3: 플러그인 권한 계층 구조
1. [ ] 업종 관리자가 플러그인 전체 활성화
2. [ ] 브랜드 관리자가 특정 플러그인 비활성화
3. [ ] 매장 관리자가 직원별 플러그인 권한 설정
4. [ ] 각 계층별 권한 우선순위 확인

## 5. 오작동 방지 테스트

### 5.1 데이터 무결성
- [ ] 존재하지 않는 ID로 접근 시도 → 적절한 오류 메시지
- [ ] 필수 필드 누락 시 생성/수정 시도 → 검증 오류
- [ ] 중복 데이터 생성 시도 → 중복 오류 처리

### 5.2 권한 오류
- [ ] 권한 없는 리소스 접근 시도 → 403 오류
- [ ] 권한 오류 로그 기록 확인
- [ ] 사용자에게 적절한 오류 메시지 표시

### 5.3 플러그인 오류
- [ ] 비활성화된 플러그인 접근 시도 → 접근 거부
- [ ] 플러그인 오류 시 로그 기록 확인
- [ ] 플러그인 오류 시 사용자에게 알림

## 6. 성능 및 안정성 테스트

### 6.1 대용량 데이터
- [ ] 많은 브랜드/매장/직원 데이터 로딩 테스트
- [ ] 플러그인 목록 대량 로딩 테스트
- [ ] 페이지네이션 동작 확인

### 6.2 동시 접근
- [ ] 여러 사용자 동시 접근 테스트
- [ ] 동시 데이터 수정 시 충돌 처리 확인

### 6.3 에러 복구
- [ ] 서버 재시작 후 데이터 무결성 확인
- [ ] 플러그인 오류 후 시스템 안정성 확인

## 7. 로그 및 모니터링

### 7.1 에러 로그
- [ ] `logs/errors.log` 파일에 오류 기록 확인
- [ ] 권한 오류 로그 확인
- [ ] 데이터 오류 로그 확인
- [ ] 플러그인 오류 로그 확인

### 7.2 성능 모니터링
- [ ] API 응답 시간 모니터링
- [ ] 데이터베이스 쿼리 성능 확인
- [ ] 메모리 사용량 모니터링

## 테스트 실행 방법

```bash
# 자동화 테스트 실행
python -m pytest tests/test_multitenancy.py -v

# 특정 테스트만 실행
python -m pytest tests/test_multitenancy.py::MultitenancyTestCase::test_industry_crud -v

# 로그 확인
tail -f logs/errors.log
``` 