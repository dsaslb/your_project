# ì£¼ì†Œ ê²€ìƒ‰ ì‹œìŠ¤í…œ - ê°œì„ ëœ ë²„ì „

## ğŸ“‹ ê°œìš”

ì£¼ì†Œ ê²€ìƒ‰ ì‹œìŠ¤í…œì€ ì¹´ì¹´ì˜¤ ì£¼ì†Œ ê²€ìƒ‰ APIë¥¼ í™œìš©í•˜ì—¬ ì‚¬ìš©ì ì¹œí™”ì ì´ê³  ì •í™•í•œ ì£¼ì†Œ ì…ë ¥ ë° ê²€ì¦ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ ì‹œìŠ¤í…œì€ ë¸Œëœë“œ, ë§¤ì¥, ì§ì› ë“±ë¡ ì‹œ ì¼ê´€ëœ ì£¼ì†Œ ê²€ìƒ‰ ê²½í—˜ì„ ì œê³µí•˜ë©°, ì‹¤ì‹œê°„ ê²€ì¦, ìë™ì™„ì„±, ì¢Œí‘œ ë³€í™˜ ë“±ì˜ ê³ ê¸‰ ê¸°ëŠ¥ì„ í¬í•¨í•©ë‹ˆë‹¤.

## ğŸš€ ì£¼ìš” ê°œì„  ì‚¬í•­

### 1. ì„±ëŠ¥ ë° ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
- **ìë™ì™„ì„± ê¸°ëŠ¥**: ì‹¤ì‹œê°„ ì£¼ì†Œ ì œì•ˆ ë° í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜
- **ë””ë°”ìš´ì‹±**: ì…ë ¥ ì§€ì—°ì„ í†µí•œ ì„±ëŠ¥ ìµœì í™”
- **ë¡œë”© í‘œì‹œê¸°**: ì‚¬ìš©ì í”¼ë“œë°± ê°•í™”
- **Toast ë©”ì‹œì§€**: ê°œì„ ëœ ì•Œë¦¼ ì‹œìŠ¤í…œ
- **ì‹¤ì‹œê°„ ê²€ì¦**: ì…ë ¥ ì¤‘ ì£¼ì†Œ ìœ íš¨ì„± ê²€ì‚¬

### 2. ë°±ì—”ë“œ API ê°œì„ 
- **ìºì‹± ì‹œìŠ¤í…œ**: ë©”ëª¨ë¦¬ ê¸°ë°˜ ìºì‹œë¡œ ì„±ëŠ¥ í–¥ìƒ
- **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**: API ì‹¤í–‰ ì‹œê°„ ì¶”ì 
- **ë¡œê¹… ì‹œìŠ¤í…œ**: ìƒì„¸í•œ ì˜¤ë¥˜ ë° ì„±ëŠ¥ ë¡œê·¸
- **ì£¼ì†Œ ì •ê·œí™”**: ì¼ê´€ëœ ì£¼ì†Œ í˜•ì‹ ë³´ì¥
- **ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”**: ìƒì„¸í•œ ì˜¤ë¥˜ ë©”ì‹œì§€ ë° ë³µêµ¬

### 3. ê´€ë¦¬ ê¸°ëŠ¥ ì¶”ê°€
- **ì£¼ì†Œ ëŒ€ì‹œë³´ë“œ**: í†µê³„ ë° ëª¨ë‹ˆí„°ë§
- **ì„¤ì • ê´€ë¦¬**: ì‹œìŠ¤í…œ ì„¤ì • ì¤‘ì•™í™”
- **ìºì‹œ ê´€ë¦¬**: ìºì‹œ ì´ˆê¸°í™” ë° ëª¨ë‹ˆí„°ë§
- **API ìƒíƒœ í™•ì¸**: ì‹¤ì‹œê°„ API ì—°ê²° ìƒíƒœ

## ğŸ› ï¸ ì„¤ì¹˜ ë° ì„¤ì •

### 1. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
# í•„ìš”í•œ Python íŒ¨í‚¤ì§€
pip install requests flask-sqlalchemy

# í”„ë¡ íŠ¸ì—”ë“œ ì˜ì¡´ì„± (ì´ë¯¸ ì„¤ì¹˜ë¨)
npm install
```

### 2. ì¹´ì¹´ì˜¤ API í‚¤ ì„¤ì •

1. [ì¹´ì¹´ì˜¤ ê°œë°œì ì„¼í„°](https://developers.kakao.com/)ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±
2. REST API í‚¤ ë°œê¸‰
3. í™˜ê²½ë³€ìˆ˜ ì„¤ì •:

```bash
export KAKAO_API_KEY="your_kakao_api_key_here"
```

ë˜ëŠ” ì„¤ì • íŒŒì¼ì—ì„œ ê´€ë¦¬:

```json
{
  "kakao_api_key": "your_kakao_api_key_here",
  "default_similarity_threshold": 0.8,
  "max_suggestions": 5,
  "debounce_delay": 300,
  "enable_cache": true,
  "cache_ttl": 300,
  "geocode_cache_ttl": 3600
}
```

### 3. ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜

```bash
# ìƒˆë¡œìš´ ì£¼ì†Œ í•„ë“œ ì¶”ê°€
flask db migrate -m "Add address fields to models"
flask db upgrade
```

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
â”œâ”€â”€ static/js/address-search.js          # ê°œì„ ëœ ì£¼ì†Œ ê²€ìƒ‰ JavaScript
â”œâ”€â”€ api/address_validation.py            # ê°œì„ ëœ ë°±ì—”ë“œ API
â”œâ”€â”€ templates/admin/
â”‚   â”œâ”€â”€ address_dashboard.html          # ì£¼ì†Œ ëŒ€ì‹œë³´ë“œ
â”‚   â”œâ”€â”€ address_settings.html           # ì„¤ì • ê´€ë¦¬ í˜ì´ì§€
â”‚   â””â”€â”€ brand_management.html           # ë¸Œëœë“œ ê´€ë¦¬ (ì£¼ì†Œ ê²€ìƒ‰ í¬í•¨)
â”œâ”€â”€ config/address_search_config.json   # ì„¤ì • íŒŒì¼
â””â”€â”€ docs/ADDRESS_SEARCH_SYSTEM.md       # ì´ ë¬¸ì„œ
```

## ğŸ”§ ì‚¬ìš©ë²•

### 1. ê¸°ë³¸ ì£¼ì†Œ ê²€ìƒ‰

```javascript
// ê¸°ë³¸ ì´ˆê¸°í™”
const addressSearch = new AddressSearch({
    apiKey: 'YOUR_KAKAO_API_KEY',
    enableAutoComplete: true,
    enableValidation: true,
    enableCoordinates: true
});
```

### 2. ê³ ê¸‰ ì„¤ì •

```javascript
// ê³ ê¸‰ ì„¤ì •ìœ¼ë¡œ ì´ˆê¸°í™”
const addressSearch = new AddressSearch({
    apiKey: 'YOUR_KAKAO_API_KEY',
    searchButtonId: 'custom-search-btn',
    addressInputId: 'custom-address-input',
    detailAddressId: 'custom-detail-input',
    zipCodeId: 'custom-zipcode-input',
    roadAddressId: 'custom-road-input',
    jibunAddressId: 'custom-jibun-input',
    latitudeId: 'custom-latitude-input',
    longitudeId: 'custom-longitude-input',
    enableAutoComplete: true,
    enableValidation: true,
    enableCoordinates: true,
    debounceDelay: 300,
    maxSuggestions: 5,
    onAddressSelected: function(data) {
        console.log('ì£¼ì†Œ ì„ íƒë¨:', data);
    },
    onError: function(message) {
        console.error('ì˜¤ë¥˜:', message);
    }
});
```

### 3. ë™ì  í•„ë“œ ìƒì„±

```javascript
// ì£¼ì†Œ ê²€ìƒ‰ ë²„íŠ¼ ìƒì„±
createAddressSearchButton('container-id', {
    buttonId: 'my-search-btn',
    buttonClass: 'btn btn-primary',
    apiKey: 'YOUR_KAKAO_API_KEY'
});

// ì£¼ì†Œ ì…ë ¥ í•„ë“œ ìƒì„±
createAddressInputFields('container-id', {
    zipCodeId: 'my-zipcode',
    roadAddressId: 'my-road-address',
    jibunAddressId: 'my-jibun-address',
    detailAddressId: 'my-detail-address',
    addressInputId: 'my-address',
    latitudeId: 'my-latitude',
    longitudeId: 'my-longitude'
});
```

## ğŸ”Œ API ì—”ë“œí¬ì¸íŠ¸

### 1. ì£¼ì†Œ ì¤‘ë³µ ì²´í¬

```http
POST /api/admin/check-address-duplicate
Content-Type: application/json

{
    "address": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123",
    "exclude_id": 123,
    "entity_type": "brand",
    "similarity_threshold": 0.8
}
```

**ì‘ë‹µ:**
```json
{
    "success": true,
    "duplicate": false,
    "similar_addresses": [],
    "message": "ì¤‘ë³µëœ ì£¼ì†Œê°€ ì—†ìŠµë‹ˆë‹¤.",
    "normalized_address": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123"
}
```

### 2. ì£¼ì†Œ ìœ íš¨ì„± ê²€ì¦

```http
POST /api/admin/validate-address
Content-Type: application/json

{
    "address": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123"
}
```

**ì‘ë‹µ:**
```json
{
    "success": true,
    "valid": true,
    "message": "ìœ íš¨í•œ ì£¼ì†Œì…ë‹ˆë‹¤.",
    "normalized_address": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123",
    "validation_details": {
        "length": 15,
        "korean_words": 4,
        "numbers": 1,
        "has_special_chars": false,
        "word_count": 4
    }
}
```

### 3. ì£¼ì†Œ ì¢Œí‘œ ë³€í™˜

```http
POST /api/admin/geocode-address
Content-Type: application/json

{
    "address": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123"
}
```

**ì‘ë‹µ:**
```json
{
    "success": true,
    "latitude": 37.5665,
    "longitude": 126.9780,
    "formatted_address": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123",
    "normalized_address": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123"
}
```

### 4. ì£¼ì†Œ ìë™ì™„ì„± ì œì•ˆ

```http
POST /api/admin/address-suggestions
Content-Type: application/json

{
    "query": "ì„œìš¸ ê°•ë‚¨",
    "limit": 5,
    "entity_type": "all"
}
```

**ì‘ë‹µ:**
```json
{
    "success": true,
    "suggestions": [
        "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123",
        "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™ 456",
        "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì‚¼ì„±ë™ 789"
    ],
    "query": "ì„œìš¸ ê°•ë‚¨"
}
```

### 5. ì£¼ì†Œ í†µê³„

```http
GET /api/admin/address-statistics
```

**ì‘ë‹µ:**
```json
{
    "success": true,
    "statistics": {
        "brands": {
            "total_with_address": 150,
            "with_coordinates": 120,
            "coordinate_percentage": 80.0
        },
        "stores": {
            "total_with_address": 500,
            "with_coordinates": 450,
            "coordinate_percentage": 90.0
        },
        "employees": {
            "total_with_address": 1000,
            "with_coordinates": 800,
            "coordinate_percentage": 80.0
        }
    }
}
```

### 6. ìºì‹œ ê´€ë¦¬

```http
POST /api/admin/clear-address-cache
Content-Type: application/json
```

**ì‘ë‹µ:**
```json
{
    "success": true,
    "message": "ìºì‹œê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. (25ê°œ í•­ëª© ì œê±°)"
}
```

## ğŸ›ï¸ ì„¤ì • ì˜µì…˜

### JavaScript ì„¤ì •

| ì˜µì…˜ | íƒ€ì… | ê¸°ë³¸ê°’ | ì„¤ëª… |
|------|------|--------|------|
| `apiKey` | string | 'YOUR_KAKAO_API_KEY' | ì¹´ì¹´ì˜¤ API í‚¤ |
| `enableAutoComplete` | boolean | true | ìë™ì™„ì„± í™œì„±í™” |
| `enableValidation` | boolean | true | ì‹¤ì‹œê°„ ê²€ì¦ í™œì„±í™” |
| `enableCoordinates` | boolean | true | ì¢Œí‘œ ìë™ ì¡°íšŒ í™œì„±í™” |
| `debounceDelay` | number | 300 | ê²€ìƒ‰ ì§€ì—°ì‹œê°„ (ms) |
| `maxSuggestions` | number | 5 | ìµœëŒ€ ì œì•ˆ ìˆ˜ |

### ë°±ì—”ë“œ ì„¤ì •

| ì„¤ì • | íƒ€ì… | ê¸°ë³¸ê°’ | ì„¤ëª… |
|------|------|--------|------|
| `kakao_api_key` | string | - | ì¹´ì¹´ì˜¤ API í‚¤ |
| `default_similarity_threshold` | float | 0.8 | ê¸°ë³¸ ìœ ì‚¬ë„ ì„ê³„ê°’ |
| `max_suggestions` | int | 5 | ìµœëŒ€ ì œì•ˆ ìˆ˜ |
| `debounce_delay` | int | 300 | ê²€ìƒ‰ ì§€ì—°ì‹œê°„ |
| `enable_cache` | boolean | true | ìºì‹œ í™œì„±í™” |
| `cache_ttl` | int | 300 | ìºì‹œ ìœ íš¨ì‹œê°„ (ì´ˆ) |
| `geocode_cache_ttl` | int | 3600 | ì¢Œí‘œ ìºì‹œ ìœ íš¨ì‹œê°„ (ì´ˆ) |

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

### 1. ìºì‹± ì „ëµ
- **ì£¼ì†Œ ê²€ì¦ ê²°ê³¼**: 1ë¶„ ìºì‹œ
- **ì¢Œí‘œ ë³€í™˜ ê²°ê³¼**: 1ì‹œê°„ ìºì‹œ
- **ìë™ì™„ì„± ì œì•ˆ**: 5ë¶„ ìºì‹œ

### 2. ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
- ì£¼ì†Œê°€ ìˆëŠ” ë ˆì½”ë“œë§Œ ì¡°íšŒ
- ì¸ë±ìŠ¤ í™œìš©
- ë°°ì¹˜ ì²˜ë¦¬ ì§€ì›

### 3. API í˜¸ì¶œ ìµœì í™”
- ë””ë°”ìš´ì‹±ì„ í†µí•œ ì¤‘ë³µ ìš”ì²­ ë°©ì§€
- ì—ëŸ¬ ì¬ì‹œë„ ë¡œì§
- íƒ€ì„ì•„ì›ƒ ì„¤ì •

## ğŸ” ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

### 1. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- API ì‹¤í–‰ ì‹œê°„ ì¶”ì 
- ìºì‹œ íˆíŠ¸ìœ¨ ëª¨ë‹ˆí„°ë§
- ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì„±ëŠ¥

### 2. ì˜¤ë¥˜ ë¡œê¹…
- API ì˜¤ë¥˜ ìƒì„¸ ë¡œê·¸
- ì‚¬ìš©ì ì…ë ¥ ì˜¤ë¥˜ ì¶”ì 
- ì‹œìŠ¤í…œ ì˜¤ë¥˜ ì•Œë¦¼

### 3. ì‚¬ìš© í†µê³„
- ì£¼ì†Œ ê²€ìƒ‰ ë¹ˆë„
- ì¢Œí‘œ ë³€í™˜ ì„±ê³µë¥ 
- ì‚¬ìš©ì ë§Œì¡±ë„ ì§€í‘œ

## ğŸ›¡ï¸ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### 1. API í‚¤ ë³´ì•ˆ
- í™˜ê²½ë³€ìˆ˜ ì‚¬ìš©
- ì„¤ì • íŒŒì¼ ì•”í˜¸í™”
- ì •ê¸°ì ì¸ í‚¤ ë¡œí…Œì´ì…˜

### 2. ì…ë ¥ ê²€ì¦
- XSS ë°©ì§€
- SQL ì¸ì ì…˜ ë°©ì§€
- ì£¼ì†Œ í˜•ì‹ ê²€ì¦

### 3. ì ‘ê·¼ ì œì–´
- ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
- API ìš”ì²­ ì œí•œ
- ë¡œê·¸ ê°ì‚¬

## ğŸš¨ ë¬¸ì œ í•´ê²°

### 1. ì¼ë°˜ì ì¸ ë¬¸ì œ

**Q: ì¹´ì¹´ì˜¤ API í‚¤ ì˜¤ë¥˜**
```
A: í™˜ê²½ë³€ìˆ˜ KAKAO_API_KEYê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
```

**Q: ì£¼ì†Œ ê²€ìƒ‰ì´ ì‘ë™í•˜ì§€ ì•ŠìŒ**
```
A: ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ JavaScript ì˜¤ë¥˜ë¥¼ í™•ì¸í•˜ê³ , ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ ì ê²€í•˜ì„¸ìš”.
```

**Q: ì¢Œí‘œ ë³€í™˜ì´ ì‹¤íŒ¨í•¨**
```
A: ì¹´ì¹´ì˜¤ Geocoding API í‚¤ê°€ ìœ íš¨í•œì§€ í™•ì¸í•˜ê³ , ì£¼ì†Œ í˜•ì‹ì´ ì˜¬ë°”ë¥¸ì§€ ì ê²€í•˜ì„¸ìš”.
```

### 2. ì„±ëŠ¥ ë¬¸ì œ

**Q: ì£¼ì†Œ ê²€ìƒ‰ì´ ëŠë¦¼**
```
A: ìºì‹œ ì„¤ì •ì„ í™•ì¸í•˜ê³ , ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ìŠ¤ë¥¼ ì ê²€í•˜ì„¸ìš”.
```

**Q: ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë†’ìŒ**
```
A: ìºì‹œ TTLì„ ì¡°ì •í•˜ê³ , ë¶ˆí•„ìš”í•œ ë°ì´í„°ë¥¼ ì •ë¦¬í•˜ì„¸ìš”.
```

### 3. ë””ë²„ê¹…

```javascript
// ë””ë²„ê·¸ ëª¨ë“œ í™œì„±í™”
const addressSearch = new AddressSearch({
    debug: true,
    onError: function(message) {
        console.error('ì£¼ì†Œ ê²€ìƒ‰ ì˜¤ë¥˜:', message);
    }
});
```

## ğŸ”„ ì—…ë°ì´íŠ¸ ë‚´ì—­

### v2.0.0 (ìµœì‹ )
- ìë™ì™„ì„± ê¸°ëŠ¥ ì¶”ê°€
- ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ
- ìºì‹± ì‹œìŠ¤í…œ ê°œì„ 
- ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ ì¶”ê°€
- ì„¤ì • ê´€ë¦¬ í˜ì´ì§€
- ì‹¤ì‹œê°„ ê²€ì¦ ê°•í™”

### v1.0.0
- ê¸°ë³¸ ì£¼ì†Œ ê²€ìƒ‰ ê¸°ëŠ¥
- ì¹´ì¹´ì˜¤ API ì—°ë™
- ì¢Œí‘œ ë³€í™˜ ê¸°ëŠ¥
- ì¤‘ë³µ ì²´í¬ ê¸°ëŠ¥

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ì¶”ê°€ ê¸°ëŠ¥ì´ í•„ìš”í•œ ê²½ìš°:

1. ë¡œê·¸ íŒŒì¼ í™•ì¸: `logs/address_search.log`
2. ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œì—ì„œ ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸
3. ì„¤ì • í˜ì´ì§€ì—ì„œ API í‚¤ ë° ì˜µì…˜ ì ê²€
4. ê°œë°œíŒ€ì— ë¬¸ì˜

---

**ì°¸ê³ **: ì´ ì‹œìŠ¤í…œì€ ì¹´ì¹´ì˜¤ ì£¼ì†Œ ê²€ìƒ‰ APIë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. API ì‚¬ìš©ëŸ‰ ì œí•œ ë° ì •ì±…ì„ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤. 