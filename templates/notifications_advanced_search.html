{% extends "base.html" %}

{% block title %}ì•Œë¦¼ ê³ ê¸‰ ê²€ìƒ‰{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h4 class="mb-0">
                        <i class="fas fa-search-plus"></i> ì•Œë¦¼ ê³ ê¸‰ ê²€ìƒ‰
                    </h4>
                </div>
                <div class="card-body">
                    <form method="GET" action="{{ url_for('notifications_filtered') }}">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="category" class="form-label">ì¹´í…Œê³ ë¦¬</label>
                                <select class="form-select" id="category" name="category">
                                    <option value="">ì „ì²´ ì¹´í…Œê³ ë¦¬</option>
                                    <option value="ë°œì£¼">ğŸ“¦ ë°œì£¼</option>
                                    <option value="ì²­ì†Œ">ğŸ§¹ ì²­ì†Œ</option>
                                    <option value="ê·¼ë¬´">ğŸ‘¤ ê·¼ë¬´</option>
                                    <option value="êµëŒ€">ğŸ” êµëŒ€</option>
                                    <option value="ê³µì§€">ğŸ”” ê³µì§€</option>
                                    <option value="ì¼ë°˜">ğŸ“ ì¼ë°˜</option>
                                </select>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="keyword" class="form-label">í‚¤ì›Œë“œ ê²€ìƒ‰</label>
                                <input type="text" class="form-control" id="keyword" name="keyword" 
                                       placeholder="ì•Œë¦¼ ë‚´ìš©ì—ì„œ ê²€ìƒ‰í•  í‚¤ì›Œë“œ">
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="is_read" class="form-label">ì½ìŒ ìƒíƒœ</label>
                                <select class="form-select" id="is_read" name="is_read">
                                    <option value="">ì „ì²´</option>
                                    <option value="false">ì•ˆì½ìŒ</option>
                                    <option value="true">ì½ìŒ</option>
                                </select>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="is_admin_only" class="form-label">ì•Œë¦¼ ìœ í˜•</label>
                                <select class="form-select" id="is_admin_only" name="is_admin_only">
                                    <option value="">ì „ì²´</option>
                                    <option value="false">ì¼ë°˜ ì•Œë¦¼</option>
                                    {% if current_user.is_admin() %}
                                    <option value="true">ê´€ë¦¬ì ì „ìš©</option>
                                    {% endif %}
                                </select>
                            </div>
                        </div>
                        
                        <!-- ë¹ ë¥¸ ê²€ìƒ‰ ë²„íŠ¼ë“¤ -->
                        <div class="mb-3">
                            <label class="form-label">ë¹ ë¥¸ ê²€ìƒ‰</label>
                            <div class="d-flex flex-wrap gap-2">
                                <button type="button" class="btn btn-outline-primary btn-sm" 
                                        onclick="setQuickSearch('ë°œì£¼', 'ìŠ¹ì¸', 'false', 'false')">
                                    ğŸ“¦ ë°œì£¼ ìŠ¹ì¸ ì•Œë¦¼
                                </button>
                                <button type="button" class="btn btn-outline-success btn-sm" 
                                        onclick="setQuickSearch('ì²­ì†Œ', '', 'false', 'false')">
                                    ğŸ§¹ ì²­ì†Œ ì•Œë¦¼ (ì•ˆì½ìŒ)
                                </button>
                                <button type="button" class="btn btn-outline-warning btn-sm" 
                                        onclick="setQuickSearch('êµëŒ€', '', 'false', 'false')">
                                    ğŸ” êµëŒ€ ì‹ ì²­ (ì•ˆì½ìŒ)
                                </button>
                                <button type="button" class="btn btn-outline-info btn-sm" 
                                        onclick="setQuickSearch('', '', 'false', 'false')">
                                    ğŸ”” ëª¨ë“  ì•ˆì½ìŒ ì•Œë¦¼
                                </button>
                                {% if current_user.is_admin() %}
                                <button type="button" class="btn btn-outline-danger btn-sm" 
                                        onclick="setQuickSearch('', '', '', 'true')">
                                    ğŸ‘‘ ê´€ë¦¬ì ì „ìš© ì•Œë¦¼
                                </button>
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <a href="{{ url_for('notifications') }}" class="btn btn-secondary me-md-2">
                                <i class="fas fa-arrow-left"></i> ëŒì•„ê°€ê¸°
                            </a>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-search"></i> ê²€ìƒ‰
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- ê²€ìƒ‰ íŒ -->
            <div class="card mt-4">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-lightbulb"></i> ê²€ìƒ‰ íŒ
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>í‚¤ì›Œë“œ ê²€ìƒ‰ ì˜ˆì‹œ:</h6>
                            <ul class="small">
                                <li><code>ìŠ¹ì¸</code> - ìŠ¹ì¸ ê´€ë ¨ ì•Œë¦¼</li>
                                <li><code>ê±°ì ˆ</code> - ê±°ì ˆ ê´€ë ¨ ì•Œë¦¼</li>
                                <li><code>ë°°ì†¡</code> - ë°°ì†¡ ê´€ë ¨ ì•Œë¦¼</li>
                                <li><code>ì§€ê°</code> - ì§€ê° ê´€ë ¨ ì•Œë¦¼</li>
                                <li><code>ê²°ê·¼</code> - ê²°ê·¼ ê´€ë ¨ ì•Œë¦¼</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6>ì¹´í…Œê³ ë¦¬ë³„ íŠ¹ì§•:</h6>
                            <ul class="small">
                                <li><strong>ë°œì£¼:</strong> ë¬¼í’ˆ ë°œì£¼, ìŠ¹ì¸, ë°°ì†¡</li>
                                <li><strong>ì²­ì†Œ:</strong> ì²­ì†Œ ê³„íš, ì™„ë£Œ</li>
                                <li><strong>ê·¼ë¬´:</strong> ì¶œê·¼, í‡´ê·¼, ì§€ê°</li>
                                <li><strong>êµëŒ€:</strong> êµëŒ€ ì‹ ì²­, ìŠ¹ì¸</li>
                                <li><strong>ê³µì§€:</strong> ê³µì§€ì‚¬í•­, ì•ˆë‚´</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// ë¹ ë¥¸ ê²€ìƒ‰ ì„¤ì •
function setQuickSearch(category, keyword, isRead, isAdminOnly) {
    document.getElementById('category').value = category;
    document.getElementById('keyword').value = keyword;
    document.getElementById('is_read').value = isRead;
    document.getElementById('is_admin_only').value = isAdminOnly;
}

// í¼ ì œì¶œ ì‹œ ë¡œë”© í‘œì‹œ
document.querySelector('form').addEventListener('submit', function() {
    const submitBtn = this.querySelector('button[type="submit"]');
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ê²€ìƒ‰ ì¤‘...';
    submitBtn.disabled = true;
});
</script>
{% endblock %} 