<!DOCTYPE html>
<html>
<head>
    <title>ëŒ€ì‹œë³´ë“œ - Core System</title>
    <meta charset="utf-8">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .header { background-color: #333; color: white; padding: 15px; margin-bottom: 20px; }
        .nav { background-color: #4CAF50; padding: 10px; margin-bottom: 20px; }
        .nav a { color: white; text-decoration: none; margin-right: 20px; padding: 8px 16px; border-radius: 5px; }
        .nav a:hover { background-color: rgba(255,255,255,0.2); }
        .container { max-width: 1200px; margin: 0 auto; }
        .notice-list { list-style-type: none; padding: 0; }
        .notice-item { background-color: #f9f9f9; margin: 10px 0; padding: 15px; border-radius: 5px; }
        .logout-btn { background-color: #f44336; color: white; padding: 8px 16px; text-decoration: none; border-radius: 5px; }
        .admin-menu { background-color: #ff9800; }
        .user-info { margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>{{ user.username }} ë‹˜ ëŒ€ì‹œë³´ë“œ</h1>
        <a href="/logout" class="logout-btn">ë¡œê·¸ì•„ì›ƒ</a>
    </div>
    
    <div class="user-info">
        <h2>ğŸ‘¤ ì‚¬ìš©ì ì •ë³´</h2>
        <p><strong>ì—­í• :</strong> {{ user.role|title }} | <strong>ì§ê¸‰:</strong> {{ user.grade|title }}</p>
        <p><strong>ìƒíƒœ:</strong> 
            {% if user.status == 'approved' %}âœ… ìŠ¹ì¸ë¨
            {% elif user.status == 'pending' %}â³ ìŠ¹ì¸ ëŒ€ê¸°
            {% else %}âŒ ê±°ì ˆë¨{% endif %}
        </p>
    </div>
    
    <div class="nav">
        {% set perms = user.get_permissions() %}
        
        <!-- ê¸°ë³¸ ê¶Œí•œ ë©”ë‰´ -->
        {% if perms.get('order', False) or user.role == 'admin' %}
            <a href="/order">ğŸ“¦ ë°œì£¼ ê´€ë¦¬</a>
        {% endif %}
        {% if perms.get('schedule', False) or user.role == 'admin' %}
            <a href="/schedule">ğŸ‘¥ ìŠ¤ì¼€ì¤„ ê´€ë¦¬</a>
        {% endif %}
        {% if perms.get('clean', False) or user.role == 'admin' %}
            <a href="/clean">ğŸ§¹ ì²­ì†Œ ê´€ë¦¬</a>
        {% endif %}
        
        <!-- í™•ì¥ ê¶Œí•œ ë©”ë‰´ -->
        {% if perms.get('inventory', False) or user.role == 'admin' %}
            <a href="/inventory">ğŸ“¦ ì¬ê³  ê´€ë¦¬</a>
        {% endif %}
        {% if perms.get('reservation', False) or user.role == 'admin' %}
            <a href="/reservation">ğŸ“… ì˜ˆì•½ ê´€ë¦¬</a>
        {% endif %}
        {% if perms.get('accounting', False) or user.role == 'admin' %}
            <a href="/accounting">ğŸ’° ì •ì‚° ê´€ë¦¬</a>
        {% endif %}
        {% if perms.get('customer', False) or user.role == 'admin' %}
            <a href="/customer">ğŸ‘¥ ê³ ê° ê´€ë¦¬</a>
        {% endif %}
        {% if perms.get('reports', False) or user.role == 'admin' %}
            <a href="/reports">ğŸ“Š ë³´ê³ ì„œ</a>
        {% endif %}
        
        <!-- ê³µí†µ ë©”ë‰´ -->
        <a href="/change_password">ğŸ” ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</a>
        <a href="/notifications">ğŸ”” ì•Œë¦¼</a>
        
        <!-- ê´€ë¦¬ì ì „ìš© ë©”ë‰´ -->
        {% if user.role == 'admin' %}
            <a href="/admin/approve_users" class="admin-menu">âœ… ê°€ì… ìŠ¹ì¸ ê´€ë¦¬</a>
            <a href="/admin/user_permissions" class="admin-menu">ğŸ”§ ì§ì› ê¶Œí•œ ê´€ë¦¬</a>
            <a href="/admin/approval_logs" class="admin-menu">ğŸ“‹ ê¶Œí•œ ë³€ê²½ ì´ë ¥</a>
        {% endif %}
    </div>
    
    <div class="container">
        <h3>ğŸ“¢ ìš´ì˜ ë°©ì¹¨/ê³µì§€</h3>
        <ul class="notice-list">
            {% for n in notices %}
                <li class="notice-item">
                    {{ n.content }} 
                    <small style="color: #666;">({{ n.created_at.strftime('%Y-%m-%d') }})</small>
                </li>
            {% endfor %}
        </ul>
    </div>
</body>
</html> 